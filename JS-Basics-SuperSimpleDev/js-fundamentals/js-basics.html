<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript Fundamentals</title>
</head>

<body>

    <input id="input-text" type="text">

    <input type="date" id="date-picker">

    <button onclick="addTodo()">Add Todo</button>

    <div id="todo-list"></div>

    <script>

        //arrays

        let todos = [{
            title: 'read a book',
            dueDate: '2022-09-23',
            id: 'id1'
        }, {
            title: 'make dinner',
            dueDate: '2022-03-15',
            id: 'id2'
        }, {
            title: 'wash car',
            dueDate: '2022-07-23',
            id: 'id3'
        }];

        render();

        //delete todo function

        function deleteTodo(event) {
            const deleteButton = event.target.id;
            // const isToDelete = deleteButton.id;

            todos = todos.filter(function (todo) {
                if (deleteButton === todo.id) {     // return true keep , false delete from todos
                    return false;
                } else {
                    return true;
                }
            })

            render();

        }


        //onclick take input and add to todos array
        function addTodo() {

            const textbox = document.getElementById('input-text');
            const inputValue = textbox.value;
            const datePicker = document.getElementById('date-picker');
            const dueDate = datePicker.value

            const id = "" + new Date().getTime();

            todos.push({
                title: inputValue,
                dueDate: dueDate,
                id: id
            });

            render();
        }

        // function for reusing the code

        function render() {
            document.getElementById('todo-list').innerHTML = '';

            todos.forEach(function (todo) {

                const element = document.createElement('div');
                element.innerText = todo.title + ' ' + todo.dueDate;

                const deleteButton = document.createElement('button');
                deleteButton.innerText = 'Delete';
                deleteButton.style = 'margin-left : 20px';
                deleteButton.onclick = deleteTodo; // run deleteTod function
                deleteButton.id = todo.id; // make todo id as button id
                element.appendChild(deleteButton);

                document.getElementById('todo-list').appendChild(element);
            })

        }




        //calling a function
        // addToDom(todo1)
        // addToDom(todo2)
        // addToDom(todo3)


    </script>
</body>

</html>